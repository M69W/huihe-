webpackJsonp([286],{Cdx3:function(t,e,a){var o=a("sB3e"),n=a("lktj");a("uqUo")("keys",function(){return function(t){return n(o(t))}})},UIPP:function(t,e,a){"use strict";var o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Main"}},[a("div",{staticClass:"main-container"},[a("div",{staticClass:"box"},[a("Form",{ref:"form",attrs:{model:e.formData,"label-width":88,rules:e.rule}},[a("Row",[a("Col",{attrs:{span:"7"}},[a("Form-item",{attrs:{label:"门店ID:",prop:"storeId"}},[a("Input",{attrs:{clearable:"",placeholder:"请输入门店ID"},model:{value:e.formData.storeId,callback:function(t){e.$set(e.formData,"storeId","string"==typeof t?t.trim():t)},expression:"formData.storeId"}})],1)],1),e._v(" "),a("Col",{attrs:{span:"7"}},[a("Form-item",{attrs:{label:"门店编号:",prop:"realName"}},[a("Input",{attrs:{clearable:"",placeholder:"请输入门店编号"},model:{value:e.formData.joinCode,callback:function(t){e.$set(e.formData,"joinCode","string"==typeof t?t.trim():t)},expression:"formData.joinCode"}})],1)],1),e._v(" "),a("Col",{attrs:{span:"7"}},[a("Form-item",{attrs:{label:"手机号:",prop:"nickName"}},[a("Input",{attrs:{clearable:"",placeholder:"请输入手机号"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone","string"==typeof t?t.trim():t)},expression:"formData.phone"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"margin-top":"0px"},attrs:{span:"2",offset:"1"}},[a("div",{staticClass:"searchBox"},[a("Button",{staticClass:"btn-search  search_btn",attrs:{type:"primary"},on:{click:function(t){e.submit("form")}}},[e._v("查询")])],1)])],1)],1)],1),e._v(" "),a("div",{staticClass:"box",staticStyle:{"margin-top":"15px",padding:"10px"}},[a("Table",{attrs:{columns:e.columns1,data:e.pageData,"disabled-hover":""}})],1),e._v(" "),a("div",{staticClass:"page-box",staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.pageNum,current:e.page},on:{"on-change":e.changePage}})],1)])]),e._v(" "),a("Modal",{attrs:{title:"备注",loading:""},on:{"on-ok":e.ok},model:{value:e.memoStatus,callback:function(t){e.memoStatus=t},expression:"memoStatus"}},[a("Input",{attrs:{placeholder:"请输入备注信息",autofocus:""},model:{value:e.memo,callback:function(t){e.memo=t},expression:"memo"}})],1),e._v(" "),a("Modal",{model:{value:e.showMore,callback:function(t){e.showMore=t},expression:"showMore"}},[a("h3",{staticStyle:{"text-align":"center"},attrs:{slot:"header"},slot:"header"},[e._v("修改")]),e._v(" "),a("Form",{attrs:{"label-width":85}},[a("Form-item",{attrs:{label:"门店名称:",prop:"storeName"}},[a("Input",{attrs:{placeholder:"请输入门店名称"},model:{value:e.addData.storeName,callback:function(t){e.$set(e.addData,"storeName",t)},expression:"addData.storeName"}})],1),e._v(" "),a("Form-item",{attrs:{label:"姓名:",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入姓名"},model:{value:e.addData.name,callback:function(t){e.$set(e.addData,"name",t)},expression:"addData.name"}})],1),e._v(" "),a("Form-item",{attrs:{label:"手机号:",prop:"phone"}},[a("Input",{attrs:{placeholder:"请输入手机号"},model:{value:e.addData.phone,callback:function(t){e.$set(e.addData,"phone",t)},expression:"addData.phone"}})],1)],1),e._v(" "),a("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error"},on:{click:function(t){e.showMore=!1}}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"success"},on:{click:e.sureChange}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};e.a=o},eFAZ:function(t,e,a){"use strict";var o=a("fZjL"),n=a.n(o);e.a={name:"user-information-modify-keepAlive",data:function(){var o=this;return{formData:{goodsType:"",activityName:"",userId:"",isBlack:"",phone:""},showMore:!1,addData:{},page:1,pageNum:0,pageSize:10,memoStatus:!1,selectUserId:"",selectBrandId:"",rule:{brandId:[{required:!0,message:"请选择品牌名称"}]},columns1:[{title:"用户ID",key:"storeId",align:"center",minWidth:140,tooltip:!0},{title:"品牌名称",key:"brandName",align:"center",tooltip:!0,minWidth:140},{title:"店铺名称",key:"storeName",align:"center",tooltip:!0,minWidth:140},{title:"客户编号",key:"joinCode",align:"center",tooltip:!0,minWidth:140},{title:"姓名",key:"name",align:"center",minWidth:100,tooltip:!0},{title:"昵称",key:"wxNickName",align:"center",minWidth:100,tooltip:!0},{title:"手机号码",key:"phone",align:"center",minWidth:140,tooltip:!0},{title:"区域",key:"areaName",align:"center",minWidth:140,tooltip:!0},{title:"地址",key:"address",align:"center",minWidth:140,tooltip:!0},{title:"状态",key:"status",minWidth:80,align:"center",render:function(t,e){return t("div",o.blackType(e.row.status))}},{title:"客户类型",key:"storeType",minWidth:110,align:"center",render:function(t,e){var a="";return a=0==e.row.storeType?"门店":"内部员工",0==e.row.storeType?t("div",a):t("div",[t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.$Modal.confirm({title:"警告",content:"是否确定解绑内部员工",onOk:function(){var t={id:e.row.storeType};o.Global.doPost("brandStaff/deleteBrandStaff.json",t,function(t){o.$Message.success("解绑成功"),o.init()})}})}}},a)])}},{title:"备注",key:"memo",align:"center",minWidth:80,render:function(t,e){return t("div",e.row.memo?e.row.memo:"无")}},{title:"操作",key:"action",minWidth:200,align:"center",render:function(t,e){var a=[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.addData={storeId:e.row.storeId,storeName:e.row.storeName,name:e.row.name,phone:e.row.phone,address:e.row.address,areaName:e.row.areaName,joinCode:e.row.joinCode,locate:e.row.locate},o.showMore=!0}}},"修改")];return 0==e.row.isDiscontinued&&a.push(t("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.$Modal.confirm({title:"警告",content:"启用停售客户必须重新导入上报信息",onOk:function(){o.Global.doPost("tool/doActivateStopStore.json",{joinCode:e.row.joinCode,brandId:e.row.brandId},function(t){o.$Message.success("操作成功"),o.init()})}})}}},"启用停售客户")),t("div",a)}}],pageData:[],memo:"",userInforEdit:!1,brandList:[],showQuery:!1}},watch:{showMore:function(t){t||(this.addData={})}},created:function(){this.$route.path},methods:{goToLog:function(){this.$router.push({path:"/stopLog"})},sureChange:function(){var e=this;if(!this.addData.name)return this.$Message.info("姓名不能为空"),!1;if(!this.addData.address)return this.$Message.info("地址不能为空"),!1;if(this.addData.phone&&!this.Global.checkPhone(this.addData.phone))return this.$Message.info("请输入正确的手机号"),!1;var t=this.addData,a={phone:t.phone,storeId:t.storeId,storeName:t.storeName,name:t.name,address:t.address,memo:"openPhone",isOnePhone:0};this.Global.doPost("store/doSettingStore.json",a,function(t){e.$Message.success("修改成功"),e.showMore=!1,e.init()})},getBrandIds:function(){var t=window.sessionStorage.getItem("user"),e="";return t&&(e=n()(JSON.parse(t).brands).join()),e},submit:function(t){var e=this;this.$refs[t].validate(function(t){t?(e.page=1,e.init()):e.$Message.error("请选择查询条件!!")})},changePage:function(t){this.page=t,this.init()},createTime:function(t){return this.Global.createTime(t)},init:function(){var e=this,t=this.Global.JsonChange(this.formData);this.Global.deleteEmptyProperty(t),t.currentPage=this.page,t.pageSize=this.pageSize,t.brandIds=this.getBrandIds(),t.isOnePhone=0,this.Global.doPost("store/querySettingStoreData.json",t,function(t){e.pageNum=t.items,e.pageData=t.datalist})},blackType:function(t){return this.Global.ENUMS.blackType[t]},ok:function(){this.getUserMemo(this.selectUserId,this.selectBrandId)},getUserMemo:function(t,e){var a=this;this.Global.doPost("report/brandUserAddMemo.json",{userId:t,brandId:e,memo:this.memo,userType:"B"},function(){a.memoStatus=!a.memoStatus,a.init()})},exportExcel:function(){var t=this.Global.JsonChange(this.formData);this.Global.deleteEmptyProperty(t),t.userType="B";var e=this.Global.getExportUrl("report/userInfoDetailExport.json",t);window.open(e)}}}},fZjL:function(t,e,a){t.exports={default:a("jFbC"),__esModule:!0}},"gg/O":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("eFAZ"),n=a("UIPP");var r=function(t){a("ls/c")},i=a("VU/8")(o.a,n.a,!1,r,"data-v-1109375e",null);e.default=i.exports},jFbC:function(t,e,a){a("Cdx3"),t.exports=a("FeBl").Object.keys},"ls/c":function(t,e,a){var o=a("n/Rm");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("ba0f10d0",o,!0,{})},"n/Rm":function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'.box[data-v-1109375e]{padding:0;min-width:1135px}button[data-v-1109375e]{outline:none;list-style:none;border:0;cursor:pointer}button#success[data-v-1109375e]{color:#19be6b;background:transparent}button#fail[data-v-1109375e]{color:#ed3f14;background:transparent}button#primary[data-v-1109375e]{color:#ff8a34;background:transparent}button.down[data-v-1109375e],button.up[data-v-1109375e]{color:#ff8a34}button.down[data-v-1109375e]:after{content:"\\F116"}button.up[data-v-1109375e]:after{content:"\\F124"}#bottonFather[data-v-1109375e]{display:flex;justify-content:center;align-items:center}.lookDetail[data-v-1109375e]{background:#febf00;border-color:#febf00;color:#fff}.ml20[data-v-1109375e]{margin-left:20px}.w18[data-v-1109375e]{width:17.5%}.w10[data-v-1109375e]{width:12.5%}.w36[data-v-1109375e]{width:35%}.fs12[data-v-1109375e]{font-size:12px}.fs14[data-v-1109375e]{font-size:14px}.fs16[data-v-1109375e]{font-size:16px}.fs28[data-v-1109375e]{font-size:28px}.text-center[data-v-1109375e]{text-align:center}.block[data-v-1109375e]{display:block}.container[data-v-1109375e]:after{display:block;clear:both;content:"";visibility:hidden;height:0}.container[data-v-1109375e]{zoom:1}.text-overflow[data-v-1109375e]{display:inline-block;max-width:80%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}input[data-v-1109375e]::-ms-input-placeholder{text-align:center!important}input[data-v-1109375e]::-webkit-input-placeholder{text-align:center!important}.displayGroupPrimary[data-v-1109375e]{color:#ff8a34}.demo-spin-icon-load[data-v-1109375e]{animation:ani-demo-spin-data-v-1109375e 1s linear infinite}@keyframes ani-demo-spin-data-v-1109375e{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}#Main[data-v-1109375e]{height:100%}#Main .main-container[data-v-1109375e]{padding-top:10px;min-height:100%;position:relative;background:#fff;padding-bottom:60px;min-width:1135px}#Main .main-container .page-box[data-v-1109375e]{overflow:hidden;position:absolute;bottom:10px;right:10px}#Main .main-container .searchBox[data-v-1109375e]{overflow:hidden}#Main .main-container .searchBox .search-left[data-v-1109375e],#Main .main-container .searchBox .search-right[data-v-1109375e]{width:48%}#Main .main-container .searchBox .search-left button[data-v-1109375e]{outline:none;border:none;width:60px;height:30px;line-height:30px;background:#fff;margin-left:8px;cursor:pointer;color:#ff8a34}#Main .main-container .searchBox .search-right[data-v-1109375e]{width:52%}#Main .main-container .searchBox .search-right img[data-v-1109375e]{cursor:pointer;margin-left:6px}#Main .main-container .numColor[data-v-1109375e]{color:#ff8a34}.box[data-v-1109375e]{width:100%;margin:0 auto;padding-bottom:0;background:#fff}.ivu-table-row[data-v-1109375e]{box-shadow:0 0 5px 2px rgba(0,0,0,.1)!important;transform:translateY(0)}.ivu-form-item-content[data-v-1109375e]{width:400px}.searchBox[data-v-1109375e]{overflow:hidden}.searchBox .search_btn[data-v-1109375e]{float:left;width:50px;padding:5px 14px;border-top-right-radius:0;border-bottom-right-radius:0}.searchBox .search_icon[data-v-1109375e]{float:left;padding:5px 10px;border-top-left-radius:0;border-bottom-left-radius:0}',""])},uqUo:function(t,e,a){var n=a("kM2E"),r=a("FeBl"),i=a("S82l");t.exports=function(t,e){var a=(r.Object||{})[t]||Object[t],o={};o[t]=e(a),n(n.S+n.F*i(function(){a(1)}),"Object",o)}}});