webpackJsonp([277],{"5Qal":function(e,t,a){var n=a("CG8o");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("dd10bf3e",n,!0,{})},"7nRM":function(e,t,a){"use strict";t.__esModule=!0;var n,r=a("c/Tr"),o=(n=r)&&n.__esModule?n:{default:n};t.default=function(e){return Array.isArray(e)?e:(0,o.default)(e)}},CG8o:function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,'.box[data-v-61d81b9e]{margin:0 auto;padding:0;min-width:1135px}button[data-v-61d81b9e]{outline:none;list-style:none;border:0;cursor:pointer}button#success[data-v-61d81b9e]{color:#19be6b;background:transparent}button#fail[data-v-61d81b9e]{color:#ed3f14;background:transparent}button#primary[data-v-61d81b9e]{color:#ff8a34;background:transparent}button.down[data-v-61d81b9e],button.up[data-v-61d81b9e]{color:#ff8a34}button.down[data-v-61d81b9e]:after{content:"\\F116"}button.up[data-v-61d81b9e]:after{content:"\\F124"}#bottonFather[data-v-61d81b9e]{display:flex;justify-content:center;align-items:center}.lookDetail[data-v-61d81b9e]{background:#febf00;border-color:#febf00;color:#fff}.ml20[data-v-61d81b9e]{margin-left:20px}.w18[data-v-61d81b9e]{width:17.5%}.w10[data-v-61d81b9e]{width:12.5%}.w36[data-v-61d81b9e]{width:35%}.fs12[data-v-61d81b9e]{font-size:12px}.fs14[data-v-61d81b9e]{font-size:14px}.fs16[data-v-61d81b9e]{font-size:16px}.fs28[data-v-61d81b9e]{font-size:28px}.text-center[data-v-61d81b9e]{text-align:center}.block[data-v-61d81b9e]{display:block}.container[data-v-61d81b9e]:after{display:block;clear:both;content:"";visibility:hidden;height:0}.container[data-v-61d81b9e]{zoom:1}.text-overflow[data-v-61d81b9e]{display:inline-block;max-width:80%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}input[data-v-61d81b9e]::-ms-input-placeholder{text-align:center!important}input[data-v-61d81b9e]::-webkit-input-placeholder{text-align:center!important}.displayGroupPrimary[data-v-61d81b9e]{color:#ff8a34}.demo-spin-icon-load[data-v-61d81b9e]{animation:ani-demo-spin-data-v-61d81b9e 1s linear infinite}@keyframes ani-demo-spin-data-v-61d81b9e{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}#Main[data-v-61d81b9e]{height:100%}#Main .main-container[data-v-61d81b9e]{padding-top:10px;min-height:100%;position:relative;background:#fff;padding-bottom:60px;min-width:1135px}#Main .main-container .page-box[data-v-61d81b9e]{overflow:hidden;position:absolute;bottom:10px;right:10px}#Main .main-container .searchBox[data-v-61d81b9e]{overflow:hidden}#Main .main-container .searchBox .search-left[data-v-61d81b9e],#Main .main-container .searchBox .search-right[data-v-61d81b9e]{width:48%}#Main .main-container .searchBox .search-left button[data-v-61d81b9e]{outline:none;border:none;width:60px;height:30px;line-height:30px;background:#fff;margin-left:8px;cursor:pointer;color:#ff8a34}#Main .main-container .searchBox .search-right[data-v-61d81b9e]{width:52%}#Main .main-container .searchBox .search-right img[data-v-61d81b9e]{cursor:pointer;margin-left:6px}#Main .main-container .numColor[data-v-61d81b9e]{color:#ff8a34}.box[data-v-61d81b9e]{width:100%;margin:0 auto 15px;padding:30px 20px 0;background:#fff}.ivu-radio-wrapper[data-v-61d81b9e]{margin-right:30px}.buttonBox[data-v-61d81b9e]{padding:10px 0}.buttonBox h4[data-v-61d81b9e]{margin-left:30px;font-weight:400;margin-bottom:20px}.buttonBox .selectBox[data-v-61d81b9e]{width:94%;margin-left:3%;height:500px;padding:10px 0;border:1px solid #e5e5e5}.buttonBox .selectBox .left[data-v-61d81b9e],.buttonBox .selectBox .right[data-v-61d81b9e]{width:100%;height:100%;padding-left:2%}.buttonBox .selectBox .left[data-v-61d81b9e]{overflow-y:auto}.buttonBox .selectBox .right .btn-box[data-v-61d81b9e]{width:200px;border:1px solid #e5e5e5;padding:10px}.buttonBox .selectBox .right .btn-box .block-btn[data-v-61d81b9e]{display:block}.roleBox[data-v-61d81b9e]{overflow:hidden;width:100%;height:auto}.roleBox .roleBoxLeft[data-v-61d81b9e],.roleBox .roleBoxRight[data-v-61d81b9e]{float:left;width:48%;margin-left:2%;box-sizing:border-box}.roleBox .roleBoxLeft[data-v-61d81b9e]{border-right:1px solid #e5e5e5}.btn[data-v-61d81b9e]{text-align:center;margin:15px}.btn .btnSearch[data-v-61d81b9e]{margin:5px}.upload-box img[data-v-61d81b9e]{float:left;width:40px;height:40px;margin-right:10px}',""])},KVGA:function(e,t,a){"use strict";var n={render:function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{attrs:{id:"Main"}},[n("div",{staticClass:"main-container"},[n("div",{staticClass:"box buttonBox"},[n("Form",{attrs:{"label-width":88}},[n("Row",[n("Col",{attrs:{span:"24"}},[n("h4",[a._v("菜单管理:")]),a._v(" "),n("div",{staticClass:"selectBox"},[n("div",{staticClass:"left"},[n("Tree",{ref:"tree",attrs:{data:a.treeData,render:a.renderContent},on:{"on-check-change":a.save}})],1)])])],1)],1)],1)]),a._v(" "),n("Modal",{model:{value:a.oneMenuShow,callback:function(e){a.oneMenuShow=e},expression:"oneMenuShow"}},[n("h3",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a._v("\n            "+a._s("add"==a.menuData.type?"新建一级菜单":"修改一级菜单")+"\n        ")]),a._v(" "),n("Form",{attrs:{model:a.menuData,"label-width":88}},[n("Form-item",{attrs:{label:"菜单名称:",prop:"resName",required:""}},[n("Input",{attrs:{placeholder:"请输入菜单名称"},model:{value:a.menuData.resName,callback:function(e){a.$set(a.menuData,"resName","string"==typeof e?e.trim():e)},expression:"menuData.resName"}})],1),a._v(" "),n("Form-item",{attrs:{label:"所属模块:",prop:"menuName",required:""}},[n("Select",{attrs:{placeholder:"模块名称",clearable:""},model:{value:a.menuData.menuName,callback:function(e){a.$set(a.menuData,"menuName",e)},expression:"menuData.menuName"}},a._l(a.modularList,function(e,t){return n("Option",{key:t,attrs:{value:e.id}},[a._v(a._s(e.title))])}))],1),a._v(" "),n("Form-item",{attrs:{label:"排序号:",prop:"orderIndex",required:""}},[n("Input",{attrs:{placeholder:"请输入序号"},model:{value:a.menuData.orderIndex,callback:function(e){a.$set(a.menuData,"orderIndex","string"==typeof e?e.trim():e)},expression:"menuData.orderIndex"}})],1),a._v(" "),n("Form-item",{attrs:{label:"icon:",prop:"resIcon",required:""}},[n("Input",{attrs:{placeholder:"请输入ICON"},model:{value:a.menuData.resIcon,callback:function(e){a.$set(a.menuData,"resIcon","string"==typeof e?e.trim():e)},expression:"menuData.resIcon"}})],1),a._v(" "),n("Form-item",{attrs:{label:"菜单说明:",prop:"summary"}},[n("Input",{attrs:{placeholder:"请输入功能说明"},model:{value:a.menuData.summary,callback:function(e){a.$set(a.menuData,"summary","string"==typeof e?e.trim():e)},expression:"menuData.summary"}})],1)],1),a._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:a.cancel}},[a._v("取消")]),a._v(" "),n("Button",{attrs:{type:"text"},on:{click:a.partitionSave}},[a._v("保存")])],1)],1),a._v(" "),n("Modal",{model:{value:a.twoMenuShow,callback:function(e){a.twoMenuShow=e},expression:"twoMenuShow"}},[n("h3",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a._v("\n            "+a._s("add"==a.menuData.type?"新建二级菜单":"修改二级菜单")+"\n        ")]),a._v(" "),n("Form",{attrs:{model:a.menuData,"label-width":100}},[n("Form-item",{attrs:{label:"菜单名称:",prop:"resName",required:""}},[n("Input",{attrs:{placeholder:"请输入菜单名称"},model:{value:a.menuData.resName,callback:function(e){a.$set(a.menuData,"resName","string"==typeof e?e.trim():e)},expression:"menuData.resName"}})],1),a._v(" "),n("Form-item",{attrs:{label:"菜单URL:",prop:"resPage",required:""}},[n("Input",{attrs:{placeholder:"请输入菜单URL"},model:{value:a.menuData.resPage,callback:function(e){a.$set(a.menuData,"resPage","string"==typeof e?e.trim():e)},expression:"menuData.resPage"}})],1),a._v(" "),n("Form-item",{attrs:{label:"所属模块:",prop:"menuName",required:""},on:{"on-change":a.getOneLevelMenuList}},[n("Select",{attrs:{placeholder:"模块名称",clearable:""},model:{value:a.menuData.menuName,callback:function(e){a.$set(a.menuData,"menuName",e)},expression:"menuData.menuName"}},a._l(a.modularList,function(e,t){return n("Option",{key:t,attrs:{value:e.id}},[a._v(a._s(e.title))])}))],1),a._v(" "),n("Form-item",{attrs:{label:"所属一级菜单:",prop:"module",required:""}},[n("Select",{attrs:{placeholder:"一级菜单",clearable:""},model:{value:a.menuData.module,callback:function(e){a.$set(a.menuData,"module",e)},expression:"menuData.module"}},a._l(a.oneLevelMenuList,function(e,t){return n("Option",{key:t,attrs:{value:e.id}},[a._v(a._s(e.resName))])}))],1),a._v(" "),n("Form-item",{attrs:{label:"排序号:",prop:"orderIndex",required:""}},[n("Input",{attrs:{placeholder:"请输入序号"},model:{value:a.menuData.orderIndex,callback:function(e){a.$set(a.menuData,"orderIndex","string"==typeof e?e.trim():e)},expression:"menuData.orderIndex"}})],1),a._v(" "),n("Form-item",{attrs:{label:"菜单说明:",prop:"summary"}},[n("Input",{attrs:{placeholder:"请输入功能说明"},model:{value:a.menuData.summary,callback:function(e){a.$set(a.menuData,"summary","string"==typeof e?e.trim():e)},expression:"menuData.summary"}})],1)],1),a._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:a.cancel}},[a._v("取消")]),a._v(" "),n("Button",{attrs:{type:"text"},on:{click:a.twoLevelMenuSure}},[a._v("保存")])],1)],1)],1)},staticRenderFns:[]};t.a=n},R4wc:function(e,t,a){var n=a("kM2E");n(n.S+n.F,"Object",{assign:a("To3L")})},To3L:function(e,t,a){"use strict";var m=a("lktj"),h=a("1kS7"),p=a("NpIQ"),f=a("sB3e"),v=a("MU5D"),r=Object.assign;e.exports=!r||a("S82l")(function(){var e={},t={},a=Symbol(),n="abcdefghijklmnopqrst";return e[a]=7,n.split("").forEach(function(e){t[e]=e}),7!=r({},e)[a]||Object.keys(r({},t)).join("")!=n})?function(e,t){for(var a=f(e),n=arguments.length,r=1,o=h.f,i=p.f;r<n;)for(var s,d=v(arguments[r++]),l=o?m(d).concat(o(d)):m(d),u=l.length,c=0;c<u;)i.call(d,s=l[c++])&&(a[s]=d[s]);return a}:r},V3tA:function(e,t,a){a("R4wc"),e.exports=a("FeBl").Object.assign},gtML:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("xqIH"),r=a("KVGA");var o=function(e){a("5Qal")},i=a("VU/8")(n.a,r.a,!1,o,"data-v-61d81b9e",null);t.default=i.exports},woOf:function(e,t,a){e.exports={default:a("V3tA"),__esModule:!0}},xqIH:function(e,t,a){"use strict";var n=a("7nRM"),r=a.n(n),o=a("woOf"),i=a.n(o),s=a("Gu7T"),d=a.n(s);t.a={name:"menu-manage-keepAlive",data:function(){return{treeData:[],modularList:[],oneLevelMenuList:[],buttonProps:{type:"text",size:"small",value:!0},showSettingRole:!1,type:"",oneMenuShow:!1,twoMenuShow:!1,menuData:{type:"",menuName:"",summary:"",orderIndex:null,resIcon:"",resName:"",resPage:""},maxLevel:[],selectData:{resType:""}}},watch:{oneMenuShow:function(e){e||(this.menuData={})},twoMenuShow:function(e){e||(this.menuData={})}},created:function(){this.getTreeData()},methods:{getTreeData:function(){var o=this,i=null;this.maxLevel=[],i=function(t,a,n){var r=[];return 0===t.length||t.forEach(function(e){e.parentId===a&&((e={title:e.resName,id:e.id,parentId:e.parentId,status:e.status,checked:!0,resType:e.resType,summary:e.summary,resIcon:e.resIcon,resPage:e.resPage,orderIndex:e.orderIndex,level:n}).children=i(t,e.id,n+1),o.maxLevel.push(n),r.push(e))}),r},this.Global.doPost("resource/queryResourceByUser.json",{},function(e){o.treeData=[],i(e,0,1).forEach(function(e){"template"==e.resType&&0==e.parentId&&o.treeData.push(e)}),o.maxLevel=Math.max.apply(Math,d()(o.maxLevel))})},renderContent:function(e,t){var a=this,n=t.root,r=t.node,o=t.data;return e("span",{style:{display:"inline-block",width:"80%"}},[e("span",[e("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px"}}),e("span",o.title)]),e("span",{style:{display:"inline-block",marginLeft:"20px"}},[e("Button",{props:i()({},this.buttonProps),style:{marginRight:"8px",display:3!=o.level?"inline-block":"none"},on:{click:function(){a.append(o)}}},"添加子菜单"),e("Button",{props:i()({},this.buttonProps),style:{display:1!=o.level?"inline-block":"none"},on:{click:function(){a.changeStatus(o)}}},1==o.status?"停用":"启用"),e("Button",{props:i()({},this.buttonProps),style:{display:1!=o.level?"inline-block":"none"},on:{click:function(){a.change(n,r,o)}}},"修改")])])},getModularList:function(){var t=this;this.modularList=[],this.treeData.forEach(function(e){t.modularList.push({title:e.title,level:e.level,parentId:e.parentId,id:e.id})})},getOneLevelMenuList:function(e){var t=this;this.oneLevelMenuList=[],this.menuData.module="",e&&this.Global.doPost("resource/queryMenuByTemplate.json",e,function(e){t.oneLevelMenuList=e})},getBelonedModule:function(a){var n=null;return this.treeData.forEach(function(t){t.children.forEach(function(e){if(e.id==a)return n=t.id;e.children&&e.children.length&&e.children.forEach(function(e){if(e.id==a)return n=t.id})})}),n},getBelonedOneMenu:function(a){var n=null;return this.treeData.forEach(function(e){e.children.forEach(function(t){t.children&&t.children.length&&t.children.forEach(function(e){if(e.id==a)return n=t.id})})}),n},append:function(e){var t=this;if(this.getModularList(),1==e.level)this.oneMenuShow=!0,this.menuData.menuName=e.id;else{var a=this.getBelonedModule(e.id);this.menuData.menuName=a,this.getOneLevelMenuList(a),2==e.level&&setTimeout(function(){t.menuData.module=e.id,t.$set(t.menuData,"module",e.id)},0),this.twoMenuShow=!0}this.menuData.level=e.level,this.menuData.type="add",this.selectData=e},changeStatus:function(a){var n=this;this.Global.doPost("resourceAuthority/removeByStatus.json",a.id,function(e){var t=1==a.status?0:1;n.$set(a,"status",t)})},remove:function(e,t,a){var n=e.find(function(e){return e===t}).parent,r=e.find(function(e){return e.nodeKey===n}).node,o=r.children.indexOf(a);r.children.splice(o,1)},change:function(e,t,a){var n=this,r=this.getBelonedModule(a.id);this.getModularList(),this.menuData.menuName=r,this.getOneLevelMenuList(r),2==a.level?this.oneMenuShow=!0:(setTimeout(function(){n.menuData.module=n.getBelonedOneMenu(a.id)},0),this.twoMenuShow=!0),this.menuData.type="edit",this.menuData.id=a.id,this.selectData=a,this.menuData.resPage=a.resPage,this.menuData.summary=a.summary,this.menuData.resIcon=a.resIcon,this.menuData.resName=a.title,this.menuData.orderIndex=a.orderIndex},save:function(){for(var e=this.$refs.tree.getCheckedNodes(),t=r()(e),a=(t[0],t.slice(1),0);a<e.length;a++);},partitionSave:function(){return this.menuData.resName?this.menuData.menuName?this.menuData.orderIndex?this.menuData.resIcon?void this.addNode(this.selectData):(this.$Message.error("菜单ICON不能为空"),!1):(this.$Message.error("排序号不能为空"),!1):(this.$Message.error("模块名称不能为空"),!1):(this.$Message.error("菜单名称不能为空"),!1)},twoLevelMenuSure:function(){var t=this;if(!this.menuData.resName)return this.$Message.error("菜单名称不能为空"),!1;if(!this.menuData.resPage)return this.$Message.error("菜单URL不能为空"),!1;if(!this.menuData.menuName)return this.$Message.error("模块名称不能为空"),!1;if(!this.menuData.module)return this.$Message.error("所属一级菜单不能为空"),!1;if(!this.menuData.orderIndex)return this.$Message.error("排序号不能为空"),!1;var e=this.menuData,a=e.resPage,n=e.orderIndex,r=e.summary,o=(e.resIcon,e.resName),i=(e.menuName,{orderIndex:n,summary:r,parentId:this.menuData.module,resName:o,resType:"page",resPage:a});"edit"==this.menuData.type&&(i.id=this.menuData.id),this.Global.deleteEmptyProperty(i),this.Global.doPost("resourceAuthority/addResource.json",i,function(e){t.$Message.success("edit"==t.menuData.type?"修改成功":"新建成功"),t.getTreeData(),t.cancel()})},cancel:function(){this.oneMenuShow=!1,this.twoMenuShow=!1},addNode:function(e){var t=this,a=this.menuData,n=(a.resPage,a.orderIndex),r=a.summary,o=a.resIcon,i=a.resName,s={orderIndex:n,summary:r,parentId:this.menuData.menuName,resName:i,resType:"menu",resIcon:o};"edit"==this.menuData.type&&(s.id=this.menuData.id),this.Global.deleteEmptyProperty(s),this.Global.doPost("resourceAuthority/addResource.json",s,function(e){t.$Message.success("edit"==t.menuData.type?"修改成功":"新建成功"),t.getTreeData(),t.cancel()})},dataChange:function(e){},createNewAccount:function(){},submit:function(e){},userBind:function(){}}}}});