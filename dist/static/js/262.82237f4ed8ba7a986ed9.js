webpackJsonp([262],{"/KTe":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,'.box[data-v-ae7e0c6c]{margin:0 auto;padding:0;background:#fff;min-width:1135px}button[data-v-ae7e0c6c]{outline:none;list-style:none;border:0;cursor:pointer}button#success[data-v-ae7e0c6c]{color:#19be6b;background:transparent}button#fail[data-v-ae7e0c6c]{color:#ed3f14;background:transparent}button#primary[data-v-ae7e0c6c]{color:#ff8a34;background:transparent}button.down[data-v-ae7e0c6c],button.up[data-v-ae7e0c6c]{color:#ff8a34}button.down[data-v-ae7e0c6c]:after{content:"\\F116"}button.up[data-v-ae7e0c6c]:after{content:"\\F124"}#bottonFather[data-v-ae7e0c6c]{display:flex;justify-content:center;align-items:center}.lookDetail[data-v-ae7e0c6c]{background:#febf00;border-color:#febf00;color:#fff}.ml20[data-v-ae7e0c6c]{margin-left:20px}.w18[data-v-ae7e0c6c]{width:17.5%}.w10[data-v-ae7e0c6c]{width:12.5%}.w36[data-v-ae7e0c6c]{width:35%}.fs12[data-v-ae7e0c6c]{font-size:12px}.fs14[data-v-ae7e0c6c]{font-size:14px}.fs16[data-v-ae7e0c6c]{font-size:16px}.fs28[data-v-ae7e0c6c]{font-size:28px}.text-center[data-v-ae7e0c6c]{text-align:center}.block[data-v-ae7e0c6c]{display:block}.container[data-v-ae7e0c6c]:after{display:block;clear:both;content:"";visibility:hidden;height:0}.container[data-v-ae7e0c6c]{zoom:1}.text-overflow[data-v-ae7e0c6c]{display:inline-block;max-width:80%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}input[data-v-ae7e0c6c]::-ms-input-placeholder{text-align:center!important}input[data-v-ae7e0c6c]::-webkit-input-placeholder{text-align:center!important}.displayGroupPrimary[data-v-ae7e0c6c]{color:#ff8a34}.demo-spin-icon-load[data-v-ae7e0c6c]{animation:ani-demo-spin-data-v-ae7e0c6c 1s linear infinite}@keyframes ani-demo-spin-data-v-ae7e0c6c{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}#Main[data-v-ae7e0c6c]{height:100%}#Main .main-container[data-v-ae7e0c6c]{padding-top:10px;min-height:100%;position:relative;background:#fff;padding-bottom:60px;min-width:1135px}#Main .main-container .page-box[data-v-ae7e0c6c]{overflow:hidden;position:absolute;bottom:10px;right:10px}#Main .main-container .searchBox[data-v-ae7e0c6c]{overflow:hidden}#Main .main-container .searchBox .search-left[data-v-ae7e0c6c],#Main .main-container .searchBox .search-right[data-v-ae7e0c6c]{width:48%}#Main .main-container .searchBox .search-left button[data-v-ae7e0c6c]{outline:none;border:none;width:60px;height:30px;line-height:30px;background:#fff;margin-left:8px;cursor:pointer;color:#ff8a34}#Main .main-container .searchBox .search-right[data-v-ae7e0c6c]{width:52%}#Main .main-container .searchBox .search-right img[data-v-ae7e0c6c]{cursor:pointer;margin-left:6px}#Main .main-container .numColor[data-v-ae7e0c6c]{color:#ff8a34}.box[data-v-ae7e0c6c]{width:100%}.ivu-radio-wrapper[data-v-ae7e0c6c]{margin-right:30px}.buttonBox[data-v-ae7e0c6c]{padding:10px 0}.buttonBox .selectBox[data-v-ae7e0c6c]{width:98%;margin-left:10px;min-height:400px;padding:10px 0;border:1px solid #e5e5e5;display:flex;flex-direction:row}.buttonBox .selectBox .left[data-v-ae7e0c6c],.buttonBox .selectBox .right[data-v-ae7e0c6c]{width:90%;height:100%;padding-left:2%}.buttonBox .selectBox .right[data-v-ae7e0c6c]{width:10%}.buttonBox .selectBox .left[data-v-ae7e0c6c]{overflow-y:auto}.buttonBox .selectBox .right .btn-box[data-v-ae7e0c6c]{width:200px;border:1px solid #e5e5e5;padding:10px}.buttonBox .selectBox .right .btn-box .block-btn[data-v-ae7e0c6c]{display:block}.roleBox[data-v-ae7e0c6c]{overflow:hidden;width:100%;height:auto}.roleBox .roleBoxLeft[data-v-ae7e0c6c],.roleBox .roleBoxRight[data-v-ae7e0c6c]{float:left;width:48%;margin-left:2%;box-sizing:border-box}.roleBox .roleBoxLeft[data-v-ae7e0c6c]{border-right:1px solid #e5e5e5}.btn[data-v-ae7e0c6c]{text-align:center;margin:15px}.btn .btnSearch[data-v-ae7e0c6c]{margin:5px}.upload-box img[data-v-ae7e0c6c]{float:left;width:40px;height:40px;margin-right:10px}.openNew[data-v-ae7e0c6c]{text-align:center;font-size:60px;color:#999;cursor:pointer;line-height:100px;margin-top:100px}.openNew span[data-v-ae7e0c6c]{display:inline-block;position:relative}.openNew span[data-v-ae7e0c6c]:before{content:"+";position:absolute;display:inline-block;top:0;left:-100px;font-size:100px}',""])},"7nRM":function(e,t,a){"use strict";t.__esModule=!0;var n,o=a("c/Tr"),i=(n=o)&&n.__esModule?n:{default:n};t.default=function(e){return Array.isArray(e)?e:(0,i.default)(e)}},R4wc:function(e,t,a){var n=a("kM2E");n(n.S+n.F,"Object",{assign:a("To3L")})},To3L:function(e,t,a){"use strict";var p=a("lktj"),m=a("1kS7"),f=a("NpIQ"),h=a("sB3e"),v=a("MU5D"),o=Object.assign;e.exports=!o||a("S82l")(function(){var e={},t={},a=Symbol(),n="abcdefghijklmnopqrst";return e[a]=7,n.split("").forEach(function(e){t[e]=e}),7!=o({},e)[a]||Object.keys(o({},t)).join("")!=n})?function(e,t){for(var a=h(e),n=arguments.length,o=1,i=m.f,r=f.f;o<n;)for(var d,c=v(arguments[o++]),s=i?p(c).concat(i(c)):p(c),l=s.length,u=0;u<l;)r.call(c,d=s[u++])&&(a[d]=c[d]);return a}:o},Uxmx:function(e,t,a){"use strict";var n=a("7nRM"),o=a.n(n),i=a("woOf"),r=a.n(i),d=a("W3Iv"),c=a.n(d);t.a={name:"organizational-relationship-management-keepAlive",data:function(){return{treeData:[],buttonProps:{type:"text",size:"small",value:!0},positionList:[{name:"无",id:"no"},{name:"起点",id:0},{name:"终点",id:1}],addNewWorke:!1,showSettingRole:!1,type:"",oneMenuShow:!1,menuData:{},brandList:[],formData:{brandId:"",brandName:""},addType:"",addNewWorkeData:{deptName:""},maxLevel:5}},watch:{addNewWorke:function(e){e||(this.addNewWorkeData.deptName="")},oneMenuShow:function(e){e||(this.menuData={})}},created:function(){var t=this;this.Global.doPostNoLoading("condition/queryBrands.json",{date:7,scope:"a"},function(e){t.brandList=[],c()(e).forEach(function(e){t.brandList.push({id:Number(e[0]),brandName:e[1]})}),t.brandList&&t.brandList.length&&(t.formData.brandId=t.brandList[0].id,t.formData.brandName=t.brandList[0].brandName,t.getTreeData(t.formData.brandId))})},methods:{weihuTree:function(){var t=this;if(!this.formData.brandId)return this.$Message.info("请选择品牌"),!1;this.Global.doPost("position/updatePosition.json",{brandId:this.formData.brandId},function(e){t.$Message.success("维护成功")})},saveNewWorke:function(){var t=this;if(!this.addNewWorkeData.deptName)return this.$Message.error("请输入流程终点"),!1;var e={brandId:this.formData.brandId,deptName:this.addNewWorkeData.deptName,memo:1,parentId:0},a="";"add"==this.addType?a="position/doSave.json":(a="position/modifyPosition.json",e.id=this.menuData.id),this.Global.doPost(a,e,function(e){t.$Message.success("add"==t.addType?"新建成功":"修改成功"),t.cancel(),t.changeValue(t.formData.brandId)})},renderContent:function(e,t){var a=this,n=t.root,o=t.node,i=t.data;return e("span",{style:{display:"inline-block",width:"80%"}},[e("span",[e("Icon",{props:{type:"ios-paper-outline"},style:{marginRight:"8px"}}),e("span",i.title)]),e("span",{style:{display:"inline-block",marginLeft:"20px"}},[e("Button",{props:r()({},this.buttonProps),style:{marginRight:"8px",display:i.level>this.maxLevel||0==i.memo?"none":"inline-block"},on:{click:function(){a.append(i)}}},"新建"),e("Button",{props:r()({},this.buttonProps),on:{click:function(){a.remove(n,o,i)}}},"删除"),e("Button",{props:r()({},this.buttonProps),on:{click:function(){a.update(i,o,n)}}},"修改")])])},append:function(e){this.oneMenuShow=!0,this.menuData.type="add",this.menuData.menuName=e.title,this.menuData.id=e.id,this.menuData.memo="no",this.menuData.level=e.level},update:function(n,e,t){var o=this;if(1==n.level)this.addType="modify",this.addNewWorke=!0,this.addNewWorkeData.deptName=n.title,this.menuData.id=n.id;else{this.menuData.type="modify",this.menuData.deptName=n.title;var i=n.level-1;t.forEach(function(e){if(e.node.level==i&&e.node.children&&e.node.children.length)for(var t=0,a=e.node.children.length;t<a;t++)e.node.children[t].id==n.id&&(o.menuData.menuName=e.node.title)}),this.menuData.id=n.id,this.menuData.level=n.level,this.menuData.memo=n.memo?parseInt(n.memo,10):"no",this.oneMenuShow=!0}},getTreeData:function(e){var a=this;this.treeData=[],this.Global.doPost("position/queryAll.json",{brandId:e},function(e){if(e&&e.length){var t=function t(a,n,o){var i=[];return 0===a.length||a.forEach(function(e){e.parentId===n&&((e={title:e.deptName,id:e.id,parentId:e.parentId,checked:!0,expand:!0,memo:e.memo,level:o}).children=t(a,e.id,o+1),i.push(e))}),i}(e,0,1);a.treeData=t,console.log(a.treeData)}})},remove:function(e,t,a){var n=this;this.$Modal.confirm({title:"警告",content:"确定删除该组织？",onOk:function(){n.Global.doPost("position/removePosition.json",{id:a.id},function(e){n.$Message.success("删除成功！"),n.changeValue(n.formData.brandId)})}})},save:function(){for(var e=this.$refs.tree.getCheckedNodes(),t=o()(e),a=(t[0],t.slice(1),0);a<e.length;a++);},partitionSave:function(){var t=this;if(!this.menuData.deptName)return this.$Message.error("请输入职位名称"),!1;var e={brandId:this.formData.brandId,deptName:this.menuData.deptName};"no"!=this.menuData.memo&&(e.memo=this.menuData.memo),this.menuData.level>=this.maxLevel&&(e.memo=0);var a="";"add"==this.menuData.type?(a="position/doSave.json",e.parentId=this.menuData.id):(a="position/modifyPosition.json",e.id=this.menuData.id),this.Global.doPost(a,e,function(e){t.$Message.success("新建成功"),t.cancel(),t.changeValue(t.formData.brandId)})},cancel:function(){this.oneMenuShow=!1,this.addNewWorke=!1},changeValue:function(t){var a=this;this.formData.brandName="",t&&(this.brandList.forEach(function(e){e.id==t&&(a.formData.brandName=e.brandName)}),this.getTreeData(t))}}}},V3tA:function(e,t,a){a("R4wc"),e.exports=a("FeBl").Object.assign},W3Iv:function(e,t,a){e.exports={default:a("wEtr"),__esModule:!0}},YkQg:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("Uxmx"),o=a("hucN");var i=function(e){a("jo80")},r=a("VU/8")(n.a,o.a,!1,i,"data-v-ae7e0c6c",null);t.default=r.exports},gSvA:function(e,t,a){var n=a("kM2E"),o=a("mbce")(!0);n(n.S,"Object",{entries:function(e){return o(e)}})},hucN:function(e,t,a){"use strict";var n={render:function(){var a=this,e=a.$createElement,n=a._self._c||e;return n("div",{attrs:{id:"Main"}},[n("div",{staticClass:"main-container"},[n("div",{staticClass:"box"},[n("Form",{ref:"form",staticClass:"form",attrs:{model:a.formData,"label-width":10}},[n("div",{staticClass:"container"},[n("div",{staticClass:"btn-left w18"},[n("Form-item",{attrs:{required:""}},[n("Select",{attrs:{placeholder:"品牌名称*"},on:{"on-change":a.changeValue},model:{value:a.formData.brandId,callback:function(e){a.$set(a.formData,"brandId",e)},expression:"formData.brandId"}},a._l(a.brandList,function(e,t){return n("Option",{key:t,attrs:{value:e.id}},[a._v(a._s(e.brandName))])}))],1)],1)])])],1),a._v(" "),n("div",{staticClass:"box buttonBox"},[n("Form",{attrs:{"label-width":88}},[n("Row",[n("Col",{attrs:{span:"24"}},[a.treeData&&a.treeData.length?n("div",{staticClass:"selectBox"},[n("div",{staticClass:"left"},[n("Tree",{ref:"tree",attrs:{data:a.treeData,render:a.renderContent},on:{"on-check-change":a.save}})],1),a._v(" "),n("div",{staticClass:"right"},[n("Button",{attrs:{type:"primary"},on:{click:a.weihuTree}},[a._v("维护关系树")])],1)]):n("div",{staticClass:"openNew"},[n("span",{on:{click:function(e){a.addNewWorke=!0,a.addType="add"}}},[a._v("开启工作流")])])])],1)],1)],1)]),a._v(" "),n("Modal",{model:{value:a.addNewWorke,callback:function(e){a.addNewWorke=e},expression:"addNewWorke"}},[n("h3",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a._v("\n          "+a._s("add"==a.addType?"新建工作流":"修改工作流")+"\n      ")]),a._v(" "),n("Form",{attrs:{model:a.menuData,"label-width":88}},[n("Form-item",{attrs:{label:"品  牌:"}},[a._v("\n            "+a._s(a.formData.brandName)+"\n        ")]),a._v(" "),n("Form-item",{attrs:{label:"流程终点:",prop:"deptName",required:""}},[n("Input",{attrs:{placeholder:"请输入流程终点"},model:{value:a.addNewWorkeData.deptName,callback:function(e){a.$set(a.addNewWorkeData,"deptName","string"==typeof e?e.trim():e)},expression:"addNewWorkeData.deptName"}})],1)],1),a._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:a.cancel}},[a._v("取消")]),a._v(" "),n("Button",{attrs:{type:"text"},on:{click:a.saveNewWorke}},[a._v("保存")])],1)],1),a._v(" "),n("Modal",{model:{value:a.oneMenuShow,callback:function(e){a.oneMenuShow=e},expression:"oneMenuShow"}},[n("h3",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a._v("\n          "+a._s("add"==a.menuData.type?"新建组织":"修改组织")+"\n      ")]),a._v(" "),n("Form",{attrs:{model:a.menuData,"label-width":88}},[n("Form-item",{attrs:{label:"职位名称:",prop:"deptName",required:""}},[n("Input",{attrs:{placeholder:"请输入职位名称"},model:{value:a.menuData.deptName,callback:function(e){a.$set(a.menuData,"deptName","string"==typeof e?e.trim():e)},expression:"menuData.deptName"}})],1),a._v(" "),n("Form-item",{attrs:{label:"汇报对象:",prop:"menuName",required:""}},[a._v("\n            "+a._s(a.menuData.menuName)+"\n        ")]),a._v(" "),n("Form-item",{attrs:{label:"位置:",required:""}},[n("Select",{attrs:{placeholder:"位置"},model:{value:a.menuData.memo,callback:function(e){a.$set(a.menuData,"memo",e)},expression:"menuData.memo"}},a._l(a.positionList,function(e,t){return n("Option",{key:t,attrs:{value:e.id}},[a._v(a._s(e.name))])}))],1)],1),a._v(" "),n("div",{staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{type:"text"},on:{click:a.cancel}},[a._v("取消")]),a._v(" "),n("Button",{attrs:{type:"text"},on:{click:a.partitionSave}},[a._v("保存")])],1)],1)],1)},staticRenderFns:[]};t.a=n},jo80:function(e,t,a){var n=a("/KTe");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("e3c8e6e0",n,!0,{})},mbce:function(e,t,a){var c=a("lktj"),s=a("TcQ7"),l=a("NpIQ").f;e.exports=function(d){return function(e){for(var t,a=s(e),n=c(a),o=n.length,i=0,r=[];i<o;)l.call(a,t=n[i++])&&r.push(d?[t,a[t]]:a[t]);return r}}},wEtr:function(e,t,a){a("gSvA"),e.exports=a("FeBl").Object.entries},woOf:function(e,t,a){e.exports={default:a("V3tA"),__esModule:!0}}});