webpackJsonp([311],{ITXE:function(t,e,a){var n=a("kXcq");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("38e9b726",n,!0,{})},bQHD:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("dCwq"),o=a("g8CI");var r=function(t){a("ITXE")},i=a("VU/8")(n.a,o.a,!1,r,"data-v-3345bf4e",null);e.default=i.exports},dCwq:function(t,e,a){"use strict";var n=a("fl7q");e.a={name:"product-download-code-keepAlive",data:function(){var a=this;return{formData:{ruleName:"",pipeLine:"",planQuantity:"",batchName:"",memo:""},page:1,pageNum:0,rule:{planQuantity:[{required:!0,message:"码包加量不能为空"},{type:"number",message:"请输入数字",trigger:"blur"}],phone:[{required:!0,message:"手机号不能为空",trigger:"blur"}],codeCheck:[{required:!0,message:"验证码不能为空",trigger:"blur"}]},columns1:[{title:"序号",type:"index",width:80,align:"center"},{title:"时间",key:"brandName",align:"center"},{title:"加码包量",key:"planQuantity",align:"center"},{title:"状态",key:"status",align:"center",render:function(t,e){return n.D[e.row.status]}},{title:"备注",key:"memo",align:"center"},{title:"操作",key:"action",align:"center",render:function(t,e){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){a.handleDownload(e.row.batchId,e.row.brandId)}}},"下载")])}}],pageData:[],activetyCodeId:null,modal2:!1,formCustom:{phone:null,codeCheck:"",batchId:"",brandId:""},getCodeStatus:!1,title:"获取验证码",userPhone:null}},created:function(){var e=this,t=this.$route.query.id;(this.activetyCodeId=t)&&this.Global.doPost("qrCodeRule/queryQrCodeRuleInfo.json",t,function(t){e.formData.qrRuleId=t.id,e.formData.qrRuleName=t.ruleName,e.formData.pipeLine=t.pipeLine,e.formData.brandId=t.brandId,e.formData.brandName=t.brandName,e.formData.activityId=t.activityId,e.formData.activityName=t.activityName,e.pageData=t.taskList});var a=sessionStorage.getItem("user"),n=JSON.parse(a).userId;this.Global.doPost("admin/doGet.json",n,function(t){e.formCustom.phone=t.phone})},mounted:function(){},methods:{submit:function(t){var e=this;this.$refs[t].validate(function(t){t?e.init():e.$Message.error("请选择查询条件!!")})},changePage:function(t){this.init(t,10)},init:function(t,e){var a=this,n=this.Global.JsonChange(this.formData);this.Global.deleteEmptyProperty(n),delete n.pipeLine,this.Global.doPost("qrCodeTask/doPorductQR.json",n,function(t){a.getList(a.activetyCodeId)})},exportExcel:function(){var t=this.Global.JsonChange(this.formData);this.Global.deleteEmptyProperty(t);var e=this.Global.getExportUrl("qrCodeTask/downloadBatchQrCodeFile.json",t);window.open(e)},handleBack:function(){this.$router.push({path:"/activityCodeMaintain"})},getList:function(t){var e=this;e.Global.doPost("qrCodeRule/queryQrCodeRuleInfo.json",t,function(t){e.formData.planQuantity=t.planQuantity,e.formData.memo=t.memo,e.formData.batchName=t.batchName,e.pageData=t.taskList})},handleDownload:function(t,e){this.formCustom.phone?(this.modal2=!0,this.formCustom.batchId=t,this.formCustom.brandId=e,this.formCustom.codeCheck="",this.getCodeStatus=!1):that.$Message.error("未获取到用户手机号")},getPhoneCode:function(t){var e=this,a=this.formCustom.phone;/^1[34578]\d{9}$/.test(a)?this.Global.sendMsg(a,"bind_mobile",function(t){e.$Message.success("验证码已发送!"),e.getCodeStatus=!0,e.phoneCodeTimeDown()}):this.$Message.error("请输入正确的手机号")},phoneCodeTimeDown:function(){var t,e=this,a=0;a=90,t=window.setInterval(function(){e.title=0==a?(clearInterval(t),e.getCodeStatus=!1,"获取验证码"):--a+"s后获取验证码"},1e3)},handleSure:function(t){var n=this;this.$refs[t].validate(function(t){if(t)if(n.formCustom.codeCheck){var e={brandId:n.formCustom.brandId,batchId:n.formCustom.batchId,AuthCode:{authCode:n.formCustom.codeCheck,phone:n.formCustom.phone,smsBizCode:"bind_mobile"}},a=n.Global.getExportUrl("qrCodeTask/downloadBatchQrCodeFile.json",e);window.open(a),n.modal2=!1}else n.$Message.error("请填写手机验证码!")})},cancle:function(){this.modal2=!1}}}},fl7q:function(t,e,a){"use strict";a.d(e,"A",function(){return n}),a.d(e,"C",function(){return o}),a.d(e,"s",function(){return r}),a.d(e,"B",function(){return i}),a.d(e,"D",function(){return d}),a.d(e,"w",function(){return s}),a.d(e,"r",function(){return l}),a.d(e,"q",function(){return u}),a.d(e,"y",function(){return c}),a.d(e,"u",function(){return f}),a.d(e,"t",function(){return m}),a.d(e,"a",function(){return p}),a.d(e,"E",function(){return b}),a.d(e,"F",function(){return h}),a.d(e,"n",function(){return v}),a.d(e,"o",function(){return g}),a.d(e,"p",function(){return C}),a.d(e,"z",function(){return x}),a.d(e,"G",function(){return y}),a.d(e,"f",function(){return k}),a.d(e,"c",function(){return w}),a.d(e,"d",function(){return D}),a.d(e,"i",function(){return _}),a.d(e,"x",function(){return I}),a.d(e,"b",function(){return B}),a.d(e,"e",function(){return S}),a.d(e,"g",function(){return N}),a.d(e,"j",function(){return q}),a.d(e,"m",function(){return G}),a.d(e,"l",function(){return M}),a.d(e,"k",function(){return P}),a.d(e,"h",function(){return T}),a.d(e,"v",function(){return Q}),a.d(e,"H",function(){return Y});var n={0:"无效",1:"有效"},o={0:"电子券",1:"实物",2:"电子红包",5:"咪咕流量包",9:"谢谢惠顾"},r={0:"待使用",1:"流通中",10:"待核销",2:"已核销",4:"已过期"},i={0:"非展示中",1:"展示中"},d={1:"执行中",2:"暂停",3:"执行完毕"},s={BPP:"e店佳",CPP:"e促达"},l={1:"展示中",2:"非展示中",3:"未开始",4:"已结束"},u={0:"审核中",1:"视频通过",2:"审核不通过",3:"退回需重传",4:"通过已发奖",1001:"预审通过",1010:"已清算",1002:"预审不通过",1003:"预审退回",2001:"审核通过"},c={"-1":"未上传",0:"审核中",1:"合格",2:"不合格",3:"不合格",4:"合格",1001:"审核中",1010:"已清算",1002:"审核中",1003:"审核中",2001:"审核中"},f={1:"合格",2:"不合格",3:"终止",4:"恢复"},m={1:"待参与",2:"参与中",3:"被终止",4:"活动结束"},p={0:"待审核",1:"通过",2:"审核不通过",3:"退回需重传",4:"通过已发放",1010:"已清算",1001:"审核中",1002:"审核中",1003:"审核中",2001:"审核中",4040:"未达发放要求"},b={"-1":"待参与",0:"待清算",1010:"已清算",4:"已发奖"},h={0:"待领用",1:"已领用",2:"已清算",3:"已发奖"},v={"-1":"不符合发奖要求",0:"待清算",1010:"已清算",4:"已发奖",4040:"不符合发奖要求",9090:"不符合发奖要求"},g={1:"正常",2:"异常"},C={0:"未领取",1:"领取中",2:"已领取",3:"提现退回"},x={0:"不合格",1:"合格"},y={0:"未签到",1:"已签到",2:"迟到",3:"待签到"},k={"-1":"待提交",0:"待审核",1:"审核通过",1001:"待审核",2:"不通过",3:"退回重签中"},w={0:"无",1:"KO冰柜",2:"客户自有冰柜",3:"KO、客户冰柜"},D={1:"KO冰柜",2:"客户冰柜",3:"KO冰柜/客户冰柜"},_={1:"是",0:"否"},I={"-2":"未参与","-1":"未上传",0:"审核中",1:"合格",2:"不合格",3:"退回重传"},B={0:"无",1:"端架陈列",2:"小方展架陈列",3:"带有价格提示的RB套餐牌",4:"助销工具投放及使用",5:"果汁货架陈列"},S={Milk:"含乳饮品",nutrient:"营养素饮料",juice:"果汁",soda:"汽水"},N={0:"初始",1:"正常",2:"锁定"},q={GT:"GT",JY:"教育",WB:"网吧",YS:"饮食",GZCS:"工作场所",QT:"其他"},G={GT:{GT_JY:"即饮"},JY:{JY_CS:"超市",JY_SPD:"食品店",JY_STNKK:"食堂内档口",JY_STNCS:"食堂内超市",JY_STNSB:"食堂内水吧"},WB:{WB_WB:"网吧"},GZCS:{GZCS_JY:"即饮"},YS:{YS_ZTWWD:"传统（无网店）",YS_ZTYWD:"传统（有网店）",YS_ZGDCYXX:"中高档（线下）",YS_ZGDCYXSXX:"中高档（线上+线下）"},QT:{QT_QT:"其他"}},M={"冀北销售部":"冀北销售部","冀南销售部":"冀南销售部","冀中销售部":"冀中销售部","雄安销售部":"雄安销售部"},P={diamond:"钻石",gold:"金",silver:"银",copper:"铜"},T={0:"无",1:"端架陈列",2:"小方展架陈列",3:"带有价格提示的RB套餐牌",4:"助销工具投放及使用",5:"果汁货架陈列"},Q={"-1":"不可参与",0:"未参与",1:"执行中"},Y={ICBKCNBJ:"工商银行",PCBCCNBJ:"建设银行",COMMCNSH:"交通银行",ABOCCNBJ:"农业银行",PSBCCNBJ:"邮政储蓄银行",BKCHCNBJ:"中国银行"}},g8CI:function(t,e,a){"use strict";var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"Main"}},[a("h2",{staticClass:"Title"},[e._v("生成并下载码包")]),e._v(" "),a("div",{staticClass:"box",staticStyle:{"padding-bottom":"10px"}},[a("Form",{ref:"form",attrs:{model:e.formData,"label-width":80,rules:e.rule}},[a("Row",[a("Col",{attrs:{span:"10"}},[a("Form-item",{attrs:{label:"码包名称"}},[a("Input",{attrs:{disabled:!0},model:{value:e.formData.qrRuleName,callback:function(t){e.$set(e.formData,"qrRuleName",t)},expression:"formData.qrRuleName"}})],1),e._v(" "),a("Form-item",{attrs:{label:"码包加量",prop:"planQuantity",required:""}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:e.formData.planQuantity,callback:function(t){e.$set(e.formData,"planQuantity",e._n(t))},expression:"formData.planQuantity"}})],1),e._v(" "),a("Form-item",{attrs:{label:"说明备注"}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:e.formData.memo,callback:function(t){e.$set(e.formData,"memo",e._n(t))},expression:"formData.memo"}})],1)],1),e._v(" "),a("Col",{attrs:{span:"10",offset:"1"}},[a("Form-item",{attrs:{label:"流水线"}},[a("Input",{attrs:{disabled:!0},model:{value:e.formData.pipeLine,callback:function(t){e.$set(e.formData,"pipeLine",t)},expression:"formData.pipeLine"}})],1),e._v(" "),a("Form-item",{attrs:{label:"批次号"}},[a("Input",{attrs:{placeholder:"请输入..."},model:{value:e.formData.batchName,callback:function(t){e.$set(e.formData,"batchName",t)},expression:"formData.batchName"}})],1)],1)],1)],1),e._v(" "),a("Table",{attrs:{columns:e.columns1,data:e.pageData,"disabled-hover":""}}),e._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:e.page,current:1},on:{"on-change":e.changePage}})],1)]),e._v(" "),a("Row",[a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"24"}},[a("Button",{staticStyle:{width:"80px"},attrs:{type:"primary"},on:{click:function(t){e.submit("form")}}},[e._v("生成码包")]),e._v(" "),a("Button",{staticStyle:{width:"80px","margin-left":"10px"},attrs:{type:"info"},on:{click:e.handleBack}},[e._v("返回")])],1)],1)],1),e._v(" "),a("Modal",{attrs:{width:"360"},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[a("p",{attrs:{slot:"header"},slot:"header"},[a("span",[e._v("下载确认")])]),e._v(" "),a("div",{staticStyle:{"text-align":"center"}},[a("Form",{ref:"formCustom",attrs:{model:e.formCustom,"label-width":80,rules:e.rule}},[a("FormItem",{attrs:{label:"手机号",prop:"phone"}},[a("Input",{attrs:{type:"text",placeholder:"请输入手机号",disabled:!0},model:{value:e.formCustom.phone,callback:function(t){e.$set(e.formCustom,"phone",t)},expression:"formCustom.phone"}})],1),e._v(" "),a("FormItem",{attrs:{label:"验证码",prop:"codeCheck"}},[a("Input",{attrs:{type:"text",placeholder:"请输入验证码"},model:{value:e.formCustom.codeCheck,callback:function(t){e.$set(e.formCustom,"codeCheck",t)},expression:"formCustom.codeCheck"}})],1),e._v(" "),a("FormItem",[a("Button",{attrs:{type:"primary",disabled:e.getCodeStatus},domProps:{textContent:e._s(e.title)},on:{click:function(t){e.getPhoneCode("formCustom")}}})],1)],1)],1),e._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:e.cancle}},[e._v("取消")]),e._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure("formCustom")}}},[e._v("确定下载")])],1)])],1)},staticRenderFns:[]};e.a=n},kXcq:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,'.box[data-v-3345bf4e]{margin:0 auto;padding:0;min-width:1135px}button[data-v-3345bf4e]{outline:none;list-style:none;border:0;cursor:pointer}button#success[data-v-3345bf4e]{color:#19be6b;background:transparent}button#fail[data-v-3345bf4e]{color:#ed3f14;background:transparent}button#primary[data-v-3345bf4e]{color:#ff8a34;background:transparent}button.down[data-v-3345bf4e],button.up[data-v-3345bf4e]{color:#ff8a34}button.down[data-v-3345bf4e]:after{content:"\\F116"}button.up[data-v-3345bf4e]:after{content:"\\F124"}#bottonFather[data-v-3345bf4e]{display:flex;justify-content:center;align-items:center}.lookDetail[data-v-3345bf4e]{background:#febf00;border-color:#febf00;color:#fff}.ml20[data-v-3345bf4e]{margin-left:20px}.w18[data-v-3345bf4e]{width:17.5%}.w10[data-v-3345bf4e]{width:12.5%}.w36[data-v-3345bf4e]{width:35%}.fs12[data-v-3345bf4e]{font-size:12px}.fs14[data-v-3345bf4e]{font-size:14px}.fs16[data-v-3345bf4e]{font-size:16px}.fs28[data-v-3345bf4e]{font-size:28px}.text-center[data-v-3345bf4e]{text-align:center}.block[data-v-3345bf4e]{display:block}.container[data-v-3345bf4e]:after{display:block;clear:both;content:"";visibility:hidden;height:0}.container[data-v-3345bf4e]{zoom:1}.text-overflow[data-v-3345bf4e]{display:inline-block;max-width:80%;overflow:hidden;white-space:nowrap;text-overflow:ellipsis}input[data-v-3345bf4e]::-ms-input-placeholder{text-align:center!important}input[data-v-3345bf4e]::-webkit-input-placeholder{text-align:center!important}.displayGroupPrimary[data-v-3345bf4e]{color:#ff8a34}.demo-spin-icon-load[data-v-3345bf4e]{animation:ani-demo-spin-data-v-3345bf4e 1s linear infinite}@keyframes ani-demo-spin-data-v-3345bf4e{0%{transform:rotate(0deg)}50%{transform:rotate(180deg)}to{transform:rotate(1turn)}}#Main[data-v-3345bf4e]{height:100%}#Main .main-container[data-v-3345bf4e]{padding-top:10px;min-height:100%;position:relative;background:#fff;padding-bottom:60px;min-width:1135px}#Main .main-container .page-box[data-v-3345bf4e]{overflow:hidden;position:absolute;bottom:10px;right:10px}#Main .main-container .searchBox[data-v-3345bf4e]{overflow:hidden}#Main .main-container .searchBox .search-left[data-v-3345bf4e],#Main .main-container .searchBox .search-right[data-v-3345bf4e]{width:48%}#Main .main-container .searchBox .search-left button[data-v-3345bf4e]{outline:none;border:none;width:60px;height:30px;line-height:30px;background:#fff;margin-left:8px;cursor:pointer;color:#ff8a34}#Main .main-container .searchBox .search-right[data-v-3345bf4e]{width:52%}#Main .main-container .searchBox .search-right img[data-v-3345bf4e]{cursor:pointer;margin-left:6px}#Main .main-container .numColor[data-v-3345bf4e]{color:#ff8a34}.box[data-v-3345bf4e]{width:100%;box-shadow:0 0 10px 2px rgba(0,0,0,.1);margin:0 auto 15px;padding:30px 20px;padding-bottom:0;background:#fff}.ivu-table-row[data-v-3345bf4e]{box-shadow:0 0 5px 2px rgba(0,0,0,.1)!important;transform:translateY(0)}',""])}});